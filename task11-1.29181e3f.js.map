{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,oDAOAC,EAAAC,KAAKC,OAAOC,iBAAiB,UAW7BC,eAA6BC,GAK3B,GAJAC,OAAOC,SAAS,EAAG,GACnBF,EAAEG,iBACFC,EAAaJ,EAAEK,OAAOC,YAAYC,MAEf,KAAfH,GAA2C,KAAtBA,EAAWI,OAGlC,OAFAb,EAAAC,KAAKa,UAAUC,UAAY,QAC3BC,EAAAC,GAASC,OAAOC,KAAK,yCAIvB,IACE,MAAMC,QAAiB,EAAAtB,EAAAuB,UAASZ,EAfZ,IAgBpB,GAAkC,IAA9BW,EAASE,KAAKC,KAAKC,OAOrB,OANAxB,EAAAC,KAAKa,UAAUC,UAAY,GAE3Bf,EAAAC,KAAKwB,YAAYC,UAAUC,IAAI,wBAC/BX,EAAAC,GAASC,OAAOC,KACd,4EAKJ,MACEG,MAAMC,KAAEA,IACNH,EAEJpB,EAAAC,KAAKa,UAAUC,WAAY,EAAAa,EAAAC,cAAaN,GACxCO,EAAO,EACPC,EAASC,UACThB,EAAAC,GAASC,OAAOe,QACd,oBAAoBb,EAASE,KAAKY,qBAGpClC,EAAAC,KAAKwB,YAAYC,UAAUS,OAAO,mBAC9Bf,EAASE,KAAKY,WAtCE,IAuClBlC,EAAAC,KAAKwB,YAAYC,UAAUC,IAAI,mBAEjCS,EAAa3B,C,CACb,MAAO4B,GACPrB,EAAAC,GAASC,OAAOoB,QAAQ,mC,KAjD5B,IAIIF,EACA3B,EAEAqB,EAPAC,EAAW,IAAIf,EAAAuB,GAAJ,CAAmB,aAAc,CAC9CC,aAAc,MAoDhBxC,EAAAC,KAAKwB,YAAYtB,iBAAiB,SAElCC,eAA+BC,GAC7ByB,GAAQ,EAER,IACE,MAAMV,QAAiB,EAAAtB,EAAAuB,UAASe,EArDZ,GAqD2CN,IACxDR,MAAMC,KAAEA,IAAUH,EAEzBpB,EAAAC,KAAKa,UAAU2B,mBAAmB,aAAa,EAAAb,EAAAC,cAAaN,IAC5DQ,EAASC,UAGPZ,EAASsB,OAAOC,OAAOC,MACvBxB,EAASE,KAAKY,UAAYd,EAASsB,OAAOC,OAAOE,WAEjD7C,EAAAC,KAAKwB,YAAYC,UAAUC,IAAI,mBAC/BX,EAAAC,GAASC,OAAOC,KACd,8D,CAGJ,MAAOkB,GACPrC,EAAAC,KAAKwB,YAAYC,UAAUC,IAAI,mBAC/BX,EAAAC,GAASC,OAAOC,KACd,6D","sources":["src/js/app-btn.js"],"sourcesContent":["import { getFetch } from './img-api';\nimport { createMarkup } from './markup';\nimport { refs } from './refs';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nrefs.formEl.addEventListener('submit', handlerSubmit);\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n});\n\nlet queryValue;\nlet inputValue;\nlet totalNumberOfPges = 40;\nlet page;\n\nasync function handlerSubmit(e) {\n  window.scrollTo(0, 0);\n  e.preventDefault();\n  inputValue = e.target.searchQuery.value;\n\n  if (inputValue === '' || inputValue.trim() === '') {\n    refs.galleryEl.innerHTML = '';\n    Notiflix.Notify.info('Your query is empty. Please try again');\n    return;\n  }\n\n  try {\n    const response = await getFetch(inputValue, totalNumberOfPges);\n    if (response.data.hits.length === 0) {\n      refs.galleryEl.innerHTML = '';\n      // lightScroll();\n      refs.btnLoadMore.classList.add('visually-hidden');\n      Notiflix.Notify.info(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    const {\n      data: { hits },\n    } = response;\n  \n    refs.galleryEl.innerHTML = createMarkup(hits);\n    page = 1;\n    lightbox.refresh();\n    Notiflix.Notify.success(\n      `Hooray! We found ${response.data.totalHits} images.`\n    );\n    // lightScroll();\n    refs.btnLoadMore.classList.remove('visually-hidden');\n    if (response.data.totalHits <= totalNumberOfPges) {\n      refs.btnLoadMore.classList.add('visually-hidden');\n    }\n    queryValue = inputValue;\n  } catch (error) {\n    Notiflix.Notify.failure('ERROR!!! Something went wrong!!!');\n  }\n}\n\nrefs.btnLoadMore.addEventListener('click', handlerLoadMore);\n\nasync function handlerLoadMore(e) {\n  page += 1;\n\n  try {\n    const response = await getFetch(queryValue, totalNumberOfPges, page);\n    const {data: { hits }} = response;\n    \n    refs.galleryEl.insertAdjacentHTML('beforeend', createMarkup(hits));\n    lightbox.refresh();\n\n    if (\n      response.config.params.page >=\n      response.data.totalHits / response.config.params.per_page\n    ) {\n      refs.btnLoadMore.classList.add('visually-hidden');\n      Notiflix.Notify.info(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    refs.btnLoadMore.classList.add('visually-hidden');\n    Notiflix.Notify.info(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n}\n\n\n// function lightScroll() {\n//   const { height: cardHeight } = document\n//     .querySelector('.gallery')\n//     .firstElementChild.getBoundingClientRect();\n\n//   window.scrollBy({\n//     top: cardHeight * 5,\n//     behavior: 'smooth',\n//   });\n// }"],"names":["$1JxcI","parcelRequire","$krGWQ","refs","formEl","addEventListener","async","e","window","scrollTo","preventDefault","$3898ce23cefc2bca$var$inputValue","target","searchQuery","value","trim","galleryEl","innerHTML","$parcel$interopDefault","$7Y9D8","Notify","info","response","getFetch","data","hits","length","btnLoadMore","classList","add","$3huUq","createMarkup","$3898ce23cefc2bca$var$page","$3898ce23cefc2bca$var$lightbox","refresh","success","totalHits","remove","$3898ce23cefc2bca$var$queryValue","error","failure","$fZKcF","captionDelay","insertAdjacentHTML","config","params","page","per_page"],"version":3,"file":"task11-1.29181e3f.js.map"}